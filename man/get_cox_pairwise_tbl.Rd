% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gkm.R
\name{get_cox_pairwise_tbl}
\alias{get_cox_pairwise_tbl}
\title{Perform Pairwise Cox Proportional Hazards Regression}
\usage{
get_cox_pairwise_tbl(model_formula, data, arm, ref_group = NULL)
}
\arguments{
\item{model_formula}{A \code{\link[stats]{formula}} object specifying the survival model, typically in the form \code{Surv(time, status) ~ arm + covariates}.}

\item{data}{A \code{\link[base]{data.frame}} containing the survival data, including time, status, and the arm variable.}

\item{arm}{A character string specifying the name of the column in \code{data} that contains the grouping/treatment arm variable (must be a factor-like variable).}

\item{ref_group}{A character string specifying the level of the \code{arm} variable to be used as the \strong{reference group} for all pairwise comparisons. If \code{NULL} (the default), the \strong{first unique level} of the \code{arm} column is used as the reference group.}
}
\value{
A \code{\link[base]{data.frame}} with the results of the pairwise comparisons. The columns include:
\itemize{
\item \code{arm}: The comparison arm being tested against the reference group.
\item \code{hr}: The Hazard Ratio (HR) for the comparison arm vs. the reference arm, formatted to two decimal places.
\item \code{ci}: The 95\\% confidence interval for the HR, presented as a string in the format "(lower, upper)", with values formatted to two decimal places.
\item \code{pval}: The log-rank p-value for the comparison.
}
}
\description{
This function performs a pairwise comparison of treatment arms using the \strong{Cox proportional hazards model} and calculates the corresponding \strong{log-rank p-value}. Each comparison is made between a specified reference group and all other comparison groups in the dataset.
}
\details{
The function iterates through each unique arm (excluding the reference group), filters the data to include only the current comparison arm and the reference arm, and then fits a Cox model (\code{\link[survival]{coxph}}) and performs a log-rank test (\code{\link[survival]{survdiff}}). The Hazard Ratio and its 95\\% confidence interval are extracted from the Cox model summary, and the p-value is calculated from the log-rank test.
}
\examples{
\dontrun{
# Example data setup (assuming 'time' is event time, 'status' is event indicator (1=event),
# and 'arm' is the treatment group)
# library(survival)
# data(lung)
# lung$arm <- factor(sample(c("A", "B", "C"), nrow(lung), replace = TRUE))
# lung$status <- lung$status - 1 # Convert status to 0/1
# lung <- na.omit(lung)

ormula <- Surv(time, status) ~ arm
results_tbl <- get_cox_pairwise_tbl(model_formula = formula,
data = lung,
arm = "arm",
ref_group = "A")
 print(results_tbl)
}
}
