% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/tbl_subgroups.R
\name{tbl_subgroups}
\alias{tbl_subgroups}
\title{Subgroup Analyses}
\usage{
tbl_subgroups(data, subgroups, .tbl_fun, ...)
}
\arguments{
\item{data}{data frame}

\item{subgroups}{character vector of column names to perform stratified analyses among}

\item{.tbl_fun}{(\code{function})
A function or formula. If a \emph{function}, it is used as is.
If a formula, e.g. \code{~ .x \%>\% tbl_summary() \%>\% add_p()}, it is converted to a function.
The stratified data frame is passed to this function.}

\item{...}{Additional arguments passed on to the \code{.tbl_fun} function.}
}
\value{
a gt table
}
\description{
Subgroup Analyses
}
\examples{
# Load required packages
library(gtsummary)
library(dplyr)

# Create a base table function:
# This function takes a data frame and returns a gtsummary table,
# showing the distribution of 'age' and 'marker' grouped by 'response'.
tbl_fun_ex <- function(data, ...) {
  data \%>\%
    select(age, marker) \%>\%
    tbl_summary(
      by = response,
      missing = "no",
      label = list(age ~ "Patient Age (years)", marker ~ "Tumor Marker"),
      statistic = list(all_continuous() ~ "{mean} ({sd})", all_categorical() ~ "{n} / {N} ({p}\%)")
    ) \%>\%
    add_p() \%>\%
    bold_p(t = 0.05) \%>\%
    # Remove the 'by' variable from the table body, as it's the 'response' column
    # which is being stratified on within the tbl_strata call.
    # We want the output to be the strata results, not the 'response' column itself.
    modify_header(label = "**Subgroup**")
}

# Use the function on the trial data
tbl_subgroups(
  data = trial,
  subgroups = c("stage", "trt"),
  .tbl_fun = tbl_fun_ex
)
}
