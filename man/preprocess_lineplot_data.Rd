% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gg_lineplot.R
\name{preprocess_lineplot_data}
\alias{preprocess_lineplot_data}
\title{Preprocess Data for Line Plot Statistics}
\usage{
preprocess_lineplot_data(
  df,
  alt_counts_df = NULL,
  x = "AVISIT",
  y = "AVAL",
  group_var = "ARM",
  subject_var = "USUBJID",
  mid = "mean",
  calc_stats_func = calc_stats,
  ...
)
}
\arguments{
\item{df}{(\code{data.frame})\cr The primary data frame containing the data to plot (e.g., ADaM BDS).}

\item{alt_counts_df}{(\code{data.frame})\cr An optional data frame for calculating N counts (e.g., ADSL).}

\item{x}{(\code{string})\cr Column name for the x-axis (e.g., \code{"AVISIT"}).}

\item{y}{(\code{string})\cr Column name for the y-axis values (e.g., \code{"AVAL"}).}

\item{group_var}{(\code{string})\cr Column name for the grouping variable (e.g., \code{"ARM"}).}

\item{subject_var}{(\code{string})\cr Column name for the subject ID (e.g., \code{"USUBJID"}).}

\item{mid}{(\code{string})\cr Column name for the mean/median statistic to be plotted (e.g., \code{"mean"}).}

\item{calc_stats_func}{(\code{function})\cr A function to calculate summary statistics, defaulting to the provided \code{calc_stats} function.}

\item{...}{Additional arguments passed to the \code{calc_stats} function (e.g., \code{conf_level}, \code{decimal_places}).}
}
\value{
A data frame (\code{df_stats}) containing the calculated statistics, ready for plotting.
}
\description{
Cleans, expands, joins, and computes summary statistics
(using \link{calc_stats}) from the raw data frame, preparing it for plotting.
}
\examples{
library(dplyr)
library(tidyr)

# Create example ADaM-like data
set.seed(123)
adlb <- data.frame(
  USUBJID = rep(paste0("SUBJ-", 1:20), each = 3),
  ARM = rep(c(rep("Treatment A", 10), rep("Treatment B", 10)), each = 3),
  AVISIT = rep(factor(c("Baseline", "Week 4", "Week 8")), 20),
  AVAL = rnorm(60, mean = 12, sd = 2)
)

adsl <- data.frame(
  USUBJID = paste0("SUBJ-", 1:20),
  ARM = c(rep("Treatment A", 10), rep("Treatment B", 10))
)

# Preprocess data for line plot with default confidence level
df_stats <- preprocess_lineplot_data(
  df = adlb,
  alt_counts_df = adsl,
  x = "AVISIT",
  y = "AVAL",
  group_var = "ARM",
  subject_var = "USUBJID"
)

# Custom confidence level using ...
df_stats_90ci <- preprocess_lineplot_data(
  df = adlb,
  alt_counts_df = adsl,
  x = "AVISIT",
  y = "AVAL",
  group_var = "ARM",
  subject_var = "USUBJID",
  conf_level = 0.90
)

# Custom decimal places using ...
df_stats_3dec <- preprocess_lineplot_data(
  df = adlb,
  alt_counts_df = adsl,
  x = "AVISIT",
  y = "AVAL",
  group_var = "ARM",
  subject_var = "USUBJID",
  decimal_places = 3
)

# Without grouping variable
df_stats_ungrouped <- preprocess_lineplot_data(
  df = adlb,
  x = "AVISIT",
  y = "AVAL",
  group_var = NULL
)
}
